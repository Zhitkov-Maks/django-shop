<html>
<body>
  {% extends 'app_megano/base.html' %}
  {% load static %}
  {% block header %}
  {{ block.super }}
  <div class="Middle Middle_top">
    <div class="Middle-top">
      <div class="wrap">
        <div class="Middle-header">
          <h1 class="Middle-title">Корзина
          </h1>
          <ul class="breadcrumbs Middle-breadcrumbs">
            <li class="breadcrumbs-item"><a href="{% url 'home' %}">home</a>
            </li>
            <li class="breadcrumbs-item breadcrumbs-item_current"><span>Корзина</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="Section">
      <div class="wrap">
        <form id="cart-form" class="form Cart form-cart" action="#" method="post">
          {% if cart %}
          {% for detail in cart %}
          <div class="Cart-product">
            <div class="Cart-block Cart-block_row">
              <div class="Cart-block Cart-block_pict"><a class="Cart-pict" href="{% url 'detail' detail.product.id %}"><img width="100px" height="auto" class="Cart-img" src="{{ detail.product.image.url }}" alt="card.jpg"/></a>
              </div>
              <div class="Cart-block Cart-block_info"><a class="Cart-title" href="{% url 'detail' detail.product.id %}">{{ detail.product.name }}</a>
                <div class="Cart-desc">{{ detail.product.description|slice:':150' }}
                </div>
              </div>
              <div class="Cart-block Cart-block_price">
                <div class="Cart-price">{{ detail.total_price }}₽
                </div>
              </div>
            </div>
            <div class="Cart-block Cart-block_row">
              <div class="Cart-block Cart-block_seller">
                <!-- - var options = setOptions(items, ['value', 'selected', 'disabled']);-->
              </div>
              <div class="Cart-block Cart-block_amount">
                <div class="Cart-amount">
                  <div class="Amount">
                    <button class="Amount-remove" type="button" value="{{ detail.product.id }}">
                    </button>
                    <input class="Amount-input form-input" name="amount" type="text" disabled value="{{ detail.quantity }}"/>
                    <button class="Amount-add" value="{{ detail.product.id }}" type="button">
                    </button>
                  </div>
                </div>
              </div>
              <div class="Cart-block Cart-block_delete">
                <button type="button" value="{{ detail.product.id }}" class="Cart-delete">
                  <img src="{% static 'assets/img/icons/card/delete.svg' %}" alt="delete.svg"/>
                </button>
              </div>
            </div>
          </div>
          {% endfor %}
          <div class="Cart-total">
            <div class="Cart-block Cart-block_total">
              <strong class="Cart-title">Итого:
              </strong><span class="Cart-price">{{ cart.get_total_price }}₽</span>
            </div>
            <div class="Cart-block"><a class="btn btn_success btn_lg" href="{% url 'order' %}">Оформить заказ</a>
            </div>
          </div>
        {% else %}
        <p>В вашей корзине пусто:(</p>
        {% endif %}
        </form>
      </div>
    </div>
  </div>
  <div class="modal__container__delete">
    <div class="modal__content__delete">
      <div id="myModal" class="content__delete">
        <p class="modal__title">Удалить товар из корзины?</p><br>
      </div>
      <div class="modal__button__delete">
          <button class="button-yes" type="button">Да</button>
          <button class="button-no">Нет</button>
      </div>
    </div>
  </div>
{% endblock header %}
{% block footer %}
{{ block.super }}
</body></html>
{% endblock footer %}
